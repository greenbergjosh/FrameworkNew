<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>EDW Client Test Survey</title>
  <style>
    form div label {
      display: flex;
      margin-top: 5px
    }
  </style>
</head>
<body>
  <form>
    <h1>Question 3</h1>
    <h3>Do you have a car?</h3>
    <input type="radio" name="hasCar" value="false" onchange="radioChanged()" checked>No
    <input type="radio" name="hasCar" value="true" onchange="radioChanged()">Yes<br>
    <br/>
    <div>
      <label for="brand">Brand</label>
      <input type="text" name="brand" disabled></input>
    </div>
    <div>
      <label for="model">Model</label>
      <input type="text" name="model" disabled></input>
    </div>
    <div>
      <label for="brand">Year</label>
      <input type="number" name="year" min="1886" max="2019" disabled></input>
    </div>
    <br/>
    <button type="button" onclick="reportAnswer()">Next</button>
  </form>
<script type="text/javascript">
  window.onload = function() {
    reportQuestion('HasCar', 3);
  };

  var radioChanged = function() {
    var disabled = !(document.querySelector('input[name="hasCar"]:checked').value == "true");
    document.getElementsByName("brand")[0].disabled = disabled;
    document.getElementsByName("model")[0].disabled = disabled;
    document.getElementsByName("year")[0].disabled = disabled;
  };

  var reportAnswer = function(nbChildren) {
    var hasCar = document.querySelector('input[name="hasCar"]:checked').value == "true";
    edw.reportToEdw(answerConfig, function(cf) {
      cf.ss.answer.hasCar = hasCar;
      if (hasCar) {
        cf.ev.push({
          key: ['event'],
          data: {
            event: '9AD3647F-17E2-403B-A7B5-8C2D49CE09BE',
            brand: document.getElementsByName("brand")[0].value,
            model: document.getElementsByName("model")[0].value,
            year: document.getElementsByName("year")[0].value
          }
        });
      }
    }, function() {
      var survey = edw.getUrlParameter('survey');
      window.location = 'q4.html?survey=' + survey;
    });
  };
</script>
<script type="text/javascript" src="test.js?a9103bc220495899e108"></script>
</body>
</html>