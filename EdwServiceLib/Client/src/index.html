<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>EDW Client Test Page</title>
</head>
<body>
    <div id="app">
    </div>
<script type="text/javascript">
  window.onload = function() {
    var config = {
      enableLogging: true,
      rs: {
        r1: {
          configId: 'EDA8BF65-C8CF-4B86-8BB1-81EE66F80ED2',
          type: edw.rsTypes.Immediate,
          data: {

          }
        }
      },
      ss: {
        grp1: {
          page: 'page1',
          pageOrder: 'page+',
          a: 1
        },
        page1: {
          a: 1,
          b: 2
        }
      },
      ev: [
        {
          splash: 's1',
          impression: 1
        }
      ]
    };

    //////////////////////////PAGE 1//////////////////////////
    var result = null;
    edw.cf(config).then(r => {
      result = r;
    })
    .catch(reason => console.log('Error! Reason: ' + reason));
    
    /*
    //////////////////////////PAGE 2//////////////////////////
    .then(t => edw.sfAllow(['grp1', 'page2']))
    .then(t => edw.getOrCreateConfig({ 
        //TODO: Specify grp1 or config storage
        r1: 'EDA8BF65-C8CF-4B86-8BB1-81EE66F80ED2',
        r2: '2229C87C-E640-4909-85A6-BFABA3DD99BE'
    }))
    .then(t => edw.rs(edw.RsTypes.Immediate, 'r1', {}))
    .then(t => edw.setStackFrame('grp1', {
      page: 'page2',
      pageOrder: 'page+'
    }))
    .then(t => edw.setStackFrame('page2', {
      c: 3,
      d: 4
    }))
    .then(t => edw.ev(['r1'], {
      splash: 's1',
      impression: 1
    }))

    //////////////////////////SURVEY//////////////////////////
    .then(t => edw.sfAllow(['grp1', 'survey']))
    .then(t => edw.cf({
      //TODO: Specify grp1 or config storage
      r1: 'EDA8BF65-C8CF-4B86-8BB1-81EE66F80ED2',
      r2: '2229C87C-E640-4909-85A6-BFABA3DD99BE'
    }))
    .then(t => edw.rs(edw.RsTypes.Immediate, 'r1', {}))
    .then(t => edw.ss('grp1', {
      page: 'survey',
      pageOrder: 'page+'
    }))
    .then(t => edw.ss('survey', {
      surveyId: 'American'
    }))
    .then(t => edw.ev(['r1'], {
      splash: 's1',
      impression: 1
    }))

    //////////////////////////QUESTION//////////////////////////
    .then(t => edw.sfAllow(['grp1', 'survey', 'question']))
    .then(t => edw.cf({
      //TODO: Specify grp1 or config storage
      r1: 'EDA8BF65-C8CF-4B86-8BB1-81EE66F80ED2',
      r2: '2229C87C-E640-4909-85A6-BFABA3DD99BE'
    }))
    .then(t => edw.rs(edw.RsTypes.Immediate, 'r1', {}))
    .then(t => edw.ss('grp1', {
      page: 'question',
      pageOrder: 'page+'
    }))
    .then(t => edw.ss('question', {
      questionId: 10
    }))
    .then(t => edw.ev(['r1'], {
      splash: 's1',
      impression: 1
    }))

    //////////////////////////ANSWER//////////////////////////
    .then(t => edw.sfAllow(['grp1', 'survey', 'question', 'answer']))
    .then(t => edw.cf({ 
      //TODO: Specify grp1 or config storage
      r1: 'EDA8BF65-C8CF-4B86-8BB1-81EE66F80ED2',
      r2: '2229C87C-E640-4909-85A6-BFABA3DD99BE'
    }))
    .then(t => edw.rs(edw.RsTypes.Immediate, 'r1', {}))
    .then(t => edw.ss('grp1', {
      page: 'question',
      pageOrder: 'page+'
    }))
    .then(t => edw.ss('answer', {
      answer: 'An hypothetic answer.'
    }))
    .then(t => edw.ev(['r1'], {
      splash: 's1',
      impression: 1
    }))
    .catch(reason => console.log('Error! Reason: ' + reason));*/
  }
</script>
</body>
</html>