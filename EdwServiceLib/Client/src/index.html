<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>EDW Client Test Page</title>
</head>
<body>
    <div id="app">
    </div>
<script type="text/javascript">
    window.onload = function() {
        EdwClient.enableLogging(true);
        
        EdwClient.stackFrameAllow(['sf1', 'sf2']);

        EdwClient.getOrCreateConfig({
            'r1': 'EDA8BF65-C8CF-4B86-8BB1-81EE66F80ED2',
            'r2': '2229C87C-E640-4909-85A6-BFABA3DD99BE',
            'r3': '7C68F21C-AEBA-4895-BF44-248876C21103'
        })
        .then(t => EdwClient.getOrCreateStackFrame('sf1', {test: 'test'}))
        .then(t => EdwClient.setStackFrame('sf1', {
            date: '09-09-2019',
            subId: 1,
            pathStyleId: 1
        }))
        .then(t => EdwClient.getOrCreateRs(EdwClient.RsTypes.Immediate, 'r1', {}))
        .then(t => EdwClient.addEvent(['r1'], {             //E1
            splash: 's1',
            impression: 1
        }))
        .then(t => EdwClient.getOrCreateRs(EdwClient.RsTypes.Checked, 'r2', {}))
        .then(t => EdwClient.getOrCreateRs(EdwClient.RsTypes.Checked, 'r3', {}))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E2
            splash: 's1',
            taken: 1,
            emailAddress: 'test@test.com'
        }))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E3
            reg: 'r1',
            impression: 2
        }))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E4
            reg: 'r1',
            click: 1,
            zip: 'ABDCDEF'
        }))
        .then(t => EdwClient.setStackFrame('sf1', {surveyId: American}))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E5
            survey: 's1',
            impression: 1
        }))
        .then(t => EdwClient.setStackFrame('sf1', {surveyQuestionId: 1}))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E5.1
            surveyQuestion: 'sq1',
            impression: 1
        }))
        .then(t => EdwClient.setStackFrame('sf1', {surveyQuestionAnswerId: 10}))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E5.1.1
            surveyQuestionAnswer: 'sqa10',
            impression: 1
        }))
        .then(t => EdwClient.setStackFrame('sf1', {surveyQuestionId: 2}))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E5.2
            surveyQuestion: 'sq2',
            impression: 1
        }))
        .then(t => EdwClient.setStackFrame('sf1', {surveyQuestionAnswerId: 20}))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E5.2.1
            surveyQuestionAnswer: 'sqa20',
            impression: 1
        }))
        .then(t => EdwClient.setStackFrame({surveyQuestionAnswerId: 21}))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E5.2.2
            surveyQuestionAnswer: 'sqa21',
            impression: 1
        }))
        .then(t => EdwClient.setStackFrame('sf1', {surveyId: null}))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E6
            endSurvey: 'American'
        }))
        .then(t => EdwClient.addEvent(['r1', 'r2', 'r3'], { //E7
            smoker: true
        }))
        .catch(reason => console.log('Error! Reason: ' + reason));
    }
</script>
</body>
</html>